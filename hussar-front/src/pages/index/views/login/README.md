# 登录页

## 打开登录页
- 获取配置数据
  请求后端获取背景图片
  this.backgroundImage();              //获取登录页背景图片
  this.innerBackgroundImage();         //获取登录框背景图片
  获取logo
  
- 获取公共属性加解密

- 获取是否开启验证码
  请求后端获取验证码是否开启           this.showKaptcha = res.data.indexKaptcha;  //从后台获取验证码情况
  获取动态密码是否开启                 this.showTotp = res.data.totp;             //从后台获取动态登录情况
  
- 获取首页面配置数据
  获取页签文字标题
  进行判断，如果后台传入的indexTitle标题文字，不为未定义或者空，那么就将获取该文字。
  获取页签的logo
  进行判断，如果后台传入的relationIcon图标，不为未定义或者空，那么就将获取该图标。



## 失去焦点的时候
- 校验用户名
  在用户框失去焦点的时候触发
  先进行判断，检查用户名框是否为空。
  如果为空，显示用户名的提示框，并显示提示语:用户名不能为空。
  隐藏密码框、验证码框、动态密码的提示框，并将它们的内容清空。
  不为空，隐藏用户名提示框。将用户名的提示语清空。并且校验密码框。
  
- 校验密码
  在密码框失去焦点、用户名框不为空的时候触发
  在用户名框不为空，失去焦点的时候触发
  先进行判断，检查密码框是否为空。用户名框是否不为空。
  如果条件为真，显示密码的提示框，并显示提示语:密码不能为空。
  隐藏验证码框和动态密码框的提示框，并将他们的内容清空。
  条件为假，隐藏密码提示框。将密码的提示语清空。并且校验验证码和动态密码。
  
- 校验验证码
  在验证码框失去焦点、用户名框和密码框不为空的时候触发
  在用户名框和密码框不为空，失去焦点的时候触发
  先进行判断，检查验证码框是否为空。用户名和密码框是否不为空。
  如果条件为真，显示验证码的提示框，并显示提示语:验证码不能为空。
  隐藏动态密码框的提示框，并将他的内容清空。
  条件为假，隐藏验证码提示框。将验证码的提示语清空。并且校验动态密码。
  
- 校验动态密码
  在动态密码框失去焦点，验证码框、用户名框和密码框不为空的时候触发
  在用户名框、密码框和验证码框不为空，失去焦点的时候触发
  先进行判断，检查动态密码框是否为空。用户名、密码框和验证码框是否不为空。
  如果条件为真，显示动态密码的提示框，并显示提示语:动态密码不能为空。
  条件为假，隐藏验证码提示框。将动态密码的提示语清空。

## 点击保存按钮
- 校验用户名
  如果为空，显示用户名提示框和用户名提示语
  否则，继续
  
- 校验密码
  如果为空，显示密码提示框和密码提示语
  否则，继续
  
- 校验验证码
  如果为空，显示验证码提示框和验证码提示语
  否则，继续
  
- 校验动态密码
  如果为空，显示动态密码提示框和动态密码提示语
  否则，继续

- loading加载开启
- 登录
  获取用户名、密码等数据。
  然后将获取的数据传入后台
    - 若登录成功
        处理path路径。若query里面有toPath,跳转到toPath,否则跳转到首页
    - 若登录失败
        清空验证码和动态密码框。
        loading加载关闭

## 注意
使用vue2.7 Composition API语法进行重构

封装了useStore、useRouter、useRoute、useI18n$t 等hooks工具类

注意form表单的ref和model属性不要重名！！！否则输入框会报错